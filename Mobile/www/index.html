<!DOCTYPE html>
<html>
    <head>
        <title>Evernym</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
            
            <!-- required libraries -->
            <link rel="stylesheet" href="lib/jquery.mobile-1.3.1.css" />
            
            
            <script type="text/javascript" src="lib/jquery-1.8.2.min.js"></script>
            <script type="text/javascript" src="lib/jquery.mobile-1.3.1.js"></script>
            <script type="text/javascript" src="lib/jquery.jsonp-2.1.4.min.js"></script>
            <script type="text/javascript" src="lib/knockout-2.2.0rc.debug.js"></script>
            <script type="text/javascript" src="lib/iscroll.js"></script>
            <script type="text/javascript" src="lib/jquery.mobile.iscrollview.js"></script>
            
            <!-- the various view models -->
            
            <script type="text/javascript" src="viewModel/EvernymService.js"></script>
            <script type="text/javascript" src="viewModel/EvernymLoginService.js"></script>
            
            <script type="text/javascript" src="viewModel/EvernymChannelService.js"></script>
            <script type="text/javascript" src="viewModel/EvernymMessageService.js"></script>
            
            
            <script type="text/javascript" src="viewModel/LoginViewModel.js"></script>
            <script type="text/javascript" src="viewModel/ChannelListViewModel.js"></script>
            <script type="text/javascript" src="viewModel/ChannelViewModel.js"></script>
            <script type="text/javascript" src="viewModel/ChannelNewViewModel.js"></script>
            <script type="text/javascript" src="viewModel/SignupViewModel.js"></script>
            
            <!-- the code that puts it all together -->
            <script type="text/javascript" src="app.js" ></script>
            
            
            <script type="text/javascript">
                $(document).live("pagechange",function(){
                                 var page = $.mobile.activePage.attr("id");
                                 });
                document.addEventListener("deviceready", function () {
                                          document.addEventListener("menubutton", menuKeyDown, true);
                                          }, false);
                function menuKeyDown() {
                    alert('Menu button pressed.');
                }
                </script>
            
            
            
            </head>
    <body>
        
        
        
        <div data-role="page" data-theme="b"
            id="channelListView">
            <div data-role="header" data-theme="b">
                <h1>Channel List</h1>
                
                <a href="#popupMenu" data-rel="popup" data-role="button" data-inline="true" data-transition="slidedown" data-icon="gear" data-theme="b" class="ui-btn-right">actions</a>
                <div data-role="popup" id="popupMenu" data-theme="a">
                    <ul data-role="listview" data-inset="true" style="min-width:210px;" data-theme="d">
                        
                        <li><a href="#" data-bind="click: logoutCommand">Logout</a></li>
                        
                    </ul>
                </div>
            </div>
            
            
            <div>
                <button data-bind="click: newChannelCommand"  data-inline="true">new channel</button>
            </div>
            
            
            <div data-role="content" data-theme="c" data-iscroll>
                
                <ul data-role="listview">
                    
                    <!-- ko foreach: channels, updateListviewOnChange:channels -->
                    <li>
                        
                        <a data-bind="click: $parent.showChannel">
                            
                            <h3 class="author" data-bind="text: name"></h3>
                            
                        </a>
                    </li>
                    <!-- /ko -->
                    
                </ul>
            </div>
            
            
        </div>
        
        
        
        <div data-role="page" xdata-theme="b"
            id="loginView" >
            <div data-role="header" xdata-theme="b">
                
                <h1>Login</h1>
            </div>
            
            <div data-role="content" Xdata-theme="b">
            
                <form >
                    
                    <div >
                        <div >
                            <input id="userName" type="text" data-bind="value: accountName" placeholder="Evernym" autocomplete="on" autofocus="autofocus"   autocapitalize="off"/>
                        </div>
                    </div>
                    
                    <div >
                        <div >
                            <input id="password" type="password" data-bind="value: password" placeholder="Password"   />
                        </div>
                    </div>
                    
                    <div >
                        <div >
                            <input id="login_submit" type="button"
                            data-bind="click: loginCommand" value="Login" data-inline="true" />
                        </div>
                    </div>
                    
                </form>
                
                <a href="javascript:" data-bind="click: showRegistration">register</a>
                
            </div>
            
        </div>
        
        
        
        
        
        
        <div data-role="page" data-theme="b"
            id="channelView">
            <div data-role="header" data-theme="b">
                <a href="#channelListView" data-role="button" data-icon="arrow-l" >Channels</a>
                <h1 data-bind="text:title"></h1>
                
                <a href="#popupMenu" data-rel="popup" data-role="button" data-inline="true" data-transition="slidedown" data-icon="gear" data-theme="b" class="ui-btn-right">actions</a>
                <div data-role="popup" id="popupMenu" data-theme="a">
                    <ul data-role="listview" data-inset="true" style="min-width:210px;" data-theme="d">
                        
                        <li><a href="#" data-bind="click: logoutCommand">Logout</a></li>
                        
                    </ul>
                </div>
                
                
            </div>
            
            <div>
                <form class="form-inline">
                    
                    <div class="control-group">
                        <div class="controls">
                            <input id="message" type="text" data-bind="value: message" placeholder="message" autocomplete="on" required data-validate="required"  data-inline="true" />
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="controls">
                            <input id="message_submit" type="button" data-bind="click: postMessageCommand" value="Submit Message"  data-inline="true" />
                        </div>
                    </div>
                    
                </form>
            </div>
            
            <hr/>
            
            <div data-role="content" data-theme="b">
                
                <input id="message_refresh" type="button" data-bind="click: refreshMessagesCommand" value="Refresh Messages"  data-inline="true" />
                
                <!--
                 <br/>
                 
                 <div id="view_channel" class="container-fluid" style="border:1px solid gray;border-radius:15px;">
                 <h3>modify channel</h3>
                 <form class="form-inline">
                 
                 <div class="control-group">
                 <div class="controls">
                 <input id="channelName" type="text" data-bind="value: channel()[0].name" placeholder="channel name" autocomplete="on" required data-validate="required" />
                 </div>
                 </div>
                 
                 <div class="control-group">
                 <div class="controls">
                 <input id="channel_submit" type="button" data-bind="click: modifyChannelCommand" value="Submit Change" class="btn btn-primary" />
                 </div>
                 </div>
                 
                 </form>
                 
                 </div>
                 -->
                
                
                
                
                <div id="view_messages"
                    data-bind="foreach: messages" >
                    <div data-bind="text: text" style="border:1px solid #EEE; border-radius:5px; margin:5px;padding:0 5px 0;background:#EEE;"></div>
                </div>
                
                
                
                
                
                
                
                
            </div>
            
        </div>
        
        
        <div data-role="page" data-theme="b"
            id="channelNewView" >
            
            <div data-role="header" data-theme="b">
                <a href="#channelListView" data-role="button" data-icon="arrow-l" >Channels</a>
                <h1>Create Channel</h1>
                
                <a href="#popupMenu" data-rel="popup" data-role="button" data-inline="true" data-transition="slidedown" data-icon="gear" data-theme="b" class="ui-btn-right">actions</a>
                <div data-role="popup" id="popupMenu" data-theme="a">
                    <ul data-role="listview" data-inset="true" style="min-width:210px;" data-theme="d">
                        
                        <li><a href="#" data-bind="click: logoutCommand">Logout</a></li>
                        
                    </ul>
                </div>
                
            </div>
            
            <div data-role="content" Xdata-theme="c" data-iscroll style="border:1px solid gray;border-radius:15px;">
                <form class="form-inline">
                    
                    <div class="control-group">
                        <div class="controls" data-bind="text: notifications">
                            
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="controls">
                            <input id="inputChannelName" type="text" data-bind="value: name" placeholder="Enter Channel Name" autocomplete="on" autofocus required data-validate="required" />
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="controls">
                            <input id="button1" type="button" data-bind="click: createChannelCommand" value="Create Channel"    data-inline="true" />
                        </div>
                    </div>
                    
                </form>
            </div>
            
            
        </div>
        
        <div data-role="page" Xdata-theme="b"
            id="signupView" >
            
            <div data-role="header" Xdata-theme="b">
                <a href="#loginView" data-role="button" data-icon="arrow-l" >Login</a>
                <h1>Register</h1>
            </div>
            
            <div data-role="content" Xdata-theme="b">
                
                <form >
                    
                    <div >
                        <div >
                            <input id="emailAddress" type="email" data-bind="value: emailaddress" placeholder="Email Address" autocomplete="on" autofocus="autofocus" required data-validate="required|email" />
                        </div>
                    </div>
                    
                    <div >
                        <div >
                            <input id="userName" type="text" data-bind="value: accountName" placeholder="Evernym" required data-validate="required" />
                        </div>
                    </div>
                    
                    <div>
                        <div >
                            <input id="firstname" type="text" data-bind="value: firstname" placeholder="First Name" autocomplete="on" required data-validate="required" />
                        </div>
                    </div>
                    
                    <div >
                        <div >
                            <input id="lastname" type="email" data-bind="value: lastname" placeholder="Last Name" autocomplete="on" required data-validate="required" />
                        </div>
                    </div>
                    
                    <div>
                        <div >
                            <input id="password" type="password" data-bind="value: password" placeholder="Password" required required data-validate="required" />
                        </div>
                    </div>
                    
                    <div >
                        <div>
                            <input id="signup_submit" type="button" data-bind="click: signUpCommand" value="Register" data-inline="true"  />
                        </div>
                    </div>
                    
                </form>
            </div>
            
        </div>
        
        
    </body>
</html>
